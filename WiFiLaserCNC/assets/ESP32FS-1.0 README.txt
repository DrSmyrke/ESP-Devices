К сожалению, из коробки память микроконтроллера не размечена под SPIFFS, для того чтобы разметить, необходимо воспользоваться плагином ESP32FS для среды разработки Arduino IDE.

После того, как плагин скачен – его необходимо установить:

    Убедитесь, что у Вас установлена новейшая версия среды разработки Arduino IDE и драйвера для Вашего устройства на ESP32. У меня M5Stack драйвера CP210X я скачиваю по этой ссылке;
    Скопируйте скаченную папку tool со вложенным в неё плагином в папку /Arduino/tools/ESP32FS/;
    В macOS папка расположена по адресу ~/Documents/Arduino/;
    Перезагрузите компьютер и проверьте в среде разработки в меню Инструменты (Tools) появится пункт ESP32 Sketch Data Upload (рисунок 2) – значит Вы всё выполнили правильно;
